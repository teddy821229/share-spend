(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-4820b5ee"],{1175:function(t,e,a){"use strict";a.r(e);var n=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"main-content"},[a("TopNavBar",{attrs:{msg:"記帳本"}}),a("div",{staticClass:"row"},[a("div",{staticClass:"col-12 col-lg-6"},[a("div",{staticClass:"title"},[t._v("消費總額")]),a("ConsumeTimeNavPills",{on:{"change-time":t.changeTime}}),a("div",{staticClass:"left-content-container"},[a("TotalConsumeCard",{attrs:{consumes:t.filteredConsume}}),a("CreateConsume",{on:{"after-create-new-consume":t.afterCreateNewConsume}})],1)],1),a("div",{staticClass:"col-12 col-lg-6"},[a("div",{staticClass:"title"},[t._v("消費列表")]),a("ConsumeCategoryNavPills",{on:{"change-category":t.changeCategory}}),a("div",{staticClass:"card-container"},t._l(t.filteredConsume,(function(e){return a("ConsumeCard",{key:e.id,attrs:{consume:e},on:{"after-click-button":t.afterClickButton}})})),1)],1)]),a("ConsumeModal",{attrs:{"modal-content":t.modalContent},on:{"after-save-change":t.afterSaveChange,"after-delete":t.afterDelete}})],1)},i=[],o=a("5530"),c=(a("4e82"),a("d81d"),a("4de4"),a("ab4f")),s=a("666f"),r=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("ul",{staticClass:"list"},t._l(t.categories,(function(e){return a("li",{key:e.id,staticClass:"category",class:{active:t.select===e.id}},[a("button",{attrs:{type:"button"},on:{click:function(a){return a.preventDefault(),a.stopPropagation(),t.filterCategory(e.id)}}},[t._v(" "+t._s(e.name)+" ")])])})),0)])},l=[],u=[{id:0,code:"all",name:"全部"},{id:1,code:"food",name:"食物"},{id:2,code:"entertainment",name:"娛樂"},{id:3,code:"transport",name:"交通"},{id:4,code:"life",name:"生活"},{id:5,code:"other",name:"其他"}],d={name:"ConsumeCategoryNavPills",data:function(){return{categories:[],select:0}},created:function(){this.fetchCategory()},methods:{fetchCategory:function(){this.categories=u},filterCategory:function(t){this.select=t,this.$emit("change-category",t)}}},m=d,f=(a("2635"),a("2877")),C=Object(f["a"])(m,r,l,!1,null,"025fb4f6",null),h=C.exports,g=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("ul",{staticClass:"list"},t._l(t.times,(function(e){return a("button",{key:e.id,class:{active:t.select===e.id},attrs:{type:"button"},on:{click:function(a){return a.preventDefault(),a.stopPropagation(),t.filterTime(e.id)}}},[a("li",{staticClass:"time"},[t._v(" "+t._s(e.section)+" ")])])})),0)])},v=[],y=[{id:1,section:"本日"},{id:2,section:"七天內"},{id:3,section:"十四天內"},{id:4,section:"一個月內"},{id:5,section:"本季內"}],p={name:"ConsumeTimeNavPills",data:function(){return{select:1,times:[]}},created:function(){this.fetchTimes()},methods:{fetchTimes:function(){this.times=y},filterTime:function(t){this.select=t,this.$emit("change-time",t)}}},b=p,_=(a("60d0"),Object(f["a"])(b,g,v,!1,null,"38463d11",null)),T=_.exports,w=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"amount-container"},[a("div",{staticClass:"total-title"},[t._v("總消費：")]),a("div",{staticClass:"total-amount"},[t._v(t._s(t._f("moneyFilter")(t.totalAmount)))]),a("div",{staticClass:"ratio-container"},[a("div",{staticClass:"progress"},t._l(t.categories,(function(t){return a("div",{key:t.id,staticClass:"progress-bar",class:t.code,style:{width:t.ratio},attrs:{role:"progressbar","aria-valuemin":"0","aria-valuemax":"100"}})})),0)]),a("div",{staticClass:"ratio-table"},t._l(t.categories,(function(e){return a("div",{key:e.id,staticClass:"category-detail",class:e.code},[a("div",{staticClass:"category-name"},[t._v(" "+t._s(e.name)+" ")]),a("div",{staticClass:"category-total"},[t._v(" "+t._s(t._f("moneyFilter")(e.total))+" ")])])})),0)])},D=[],k=(a("159b"),a("2708")),N={name:"TotalConsumeCard",mixins:[k["b"]],props:{consumes:{type:Array,required:!0}},watch:{consumes:{handler:function(){this.calculateTotal()},deep:!0}},created:function(){this.calculateTotal()},data:function(){return{categories:[{id:1,code:"food",name:"食物",total:0,ratio:"0%"},{id:2,code:"life",name:"生活",total:0,ratio:"0%"},{id:3,code:"entertainment",name:"娛樂",total:0,ratio:"0%"},{id:4,code:"transport",name:"交通",total:0,ratio:"0%"},{id:5,code:"other",name:"其他",total:0,ratio:"0%"}]}},methods:{calculateTotal:function(){var t=this;this.cleanTotal(),this.consumes.forEach((function(e){t.categories.map((function(t){e.Category.code===t.code&&(t.total+=e.amount)}))})),this.calculateRatio()},calculateRatio:function(){var t=this;this.categories.forEach((function(e){return 0===e.total?e.ratio="0%":e.ratio=e.total/t.totalAmount*100+"%"}))},cleanTotal:function(){this.categories.forEach((function(t){return t.total=0}))}},computed:{totalAmount:function(){var t=0;return this.categories.forEach((function(e){t+=e.total})),t}}},F=N,P=(a("cd98"),Object(f["a"])(F,w,D,!1,null,"0780c7e2",null)),j=P.exports,E=a("bdb3"),O=a("6cb3"),x=[{id:1,Category:{id:1,code:"food",icon:"fast-food-outline",name:"食物"},name:"午餐麥當勞歡樂送送送到你家哈哈哈哈",amount:500,date:new Date(2021,7,2)},{id:2,Category:{id:2,code:"entertainment",icon:"game-controller-outline",name:"娛樂"},name:"盲盒",amount:700,date:new Date(2021,6,28)},{id:3,Category:{id:4,code:"life",icon:"cafe-outline",name:"生活"},name:"洗髮水",amount:120,date:new Date(2021,6,1)},{id:4,Category:{id:1,code:"food",icon:"fast-food-outline",name:"食物"},name:"午餐",amount:261,date:new Date(2021,6,2)},{id:5,Category:{id:4,code:"life",icon:"cafe-outline",name:"生活"},name:"洗面乳",amount:120,date:new Date(2021,5,28)},{id:6,Category:{id:2,code:"entertainment",icon:"game-controller-outline",name:"娛樂"},name:"電影",amount:200,date:new Date(2021,6,5)},{id:7,Category:{id:3,code:"transport",icon:"train-outline",name:"交通"},name:"高鐵",amount:1300,date:new Date(2021,5,4)},{id:8,Category:{id:5,code:"other",icon:"cash-outline",name:"其他"},name:"捐款",amount:200,date:new Date(2021,5,23)},{id:9,Category:{id:3,code:"transport",icon:"train-outline",name:"交通"},name:"高鐵",amount:1300,date:new Date(2021,5,1)},{id:10,Category:{id:2,code:"entertainment",icon:"game-controller-outline",name:"娛樂"},name:"線上抽盒機",amount:1300,date:new Date(2021,6,13)}],$={name:"Payment",components:{TopNavBar:c["a"],ConsumeCard:s["a"],ConsumeCategoryNavPills:h,ConsumeTimeNavPills:T,TotalConsumeCard:j,CreateConsume:E["a"],ConsumeModal:O["a"]},created:function(){this.fetchConsume()},data:function(){return{consumes:[],modalContent:{},categoryFilter:0,timeFilter:1}},methods:{fetchConsume:function(){this.consumes=x,this.consumes.sort((function(t,e){return e.date.getTime()-t.date.getTime()}))},afterClickButton:function(t){this.modalContent=Object(o["a"])(Object(o["a"])({},this.modalContent),t)},changeCategory:function(t){this.categoryFilter=t},changeTime:function(t){this.timeFilter=t},afterSaveChange:function(t){this.consumes=this.consumes.map((function(e){return e.id===t.id?Object(o["a"])(Object(o["a"])({},e),t):e}))},afterCreateNewConsume:function(t){this.consumes.unshift(t)},afterDelete:function(t){this.consumes=this.consumes.filter((function(e){return e.id!==t.id}))}},computed:{filteredConsume:function(){var t=this;return 0===this.categoryFilter?this.filteredTime:this.filteredTime.filter((function(e){return e.Category.id===t.categoryFilter}))},filteredTime:function(){var t=this,e=new Date,a=864e5,n=7*a,i=14*a,o=30*a,c=3*o,s={1:a,2:n,3:i,4:o,5:c};return this.consumes.filter((function(a){return e.getTime()-a.date.getTime()<=s[t.timeFilter]}))}}},A=$,B=(a("f5c2"),Object(f["a"])(A,n,i,!1,null,"fd71ac46",null));e["default"]=B.exports},2635:function(t,e,a){"use strict";a("3bcd")},"3bcd":function(t,e,a){},"60d0":function(t,e,a){"use strict";a("83cd")},"73a6":function(t,e,a){},"83cd":function(t,e,a){},b34f:function(t,e,a){},cd98:function(t,e,a){"use strict";a("b34f")},f5c2:function(t,e,a){"use strict";a("73a6")}}]);
//# sourceMappingURL=chunk-4820b5ee.2faf454c.js.map